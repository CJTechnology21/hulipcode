# Leegality Workflow Troubleshooting Guide

## Your Current Workflow
- **Name:** Huelip
- **Workflow ID (Profile ID):** 0l5Qk1j
- **Type:** PDF
- **Status:** Active

## Steps to Check Workflow Settings

### 1. Open Workflow Details
1. In your Leegality Dashboard, click on the **three dots (â‹®)** next to the "Huelip" workflow
2. Select **"Edit"** or **"View Details"**

### 2. Check Document/File Settings
Look for these settings in the workflow configuration:

#### A. File Upload Settings
- **Allowed File Types:** Should include "PDF" or "All"
- **File Size Limit:** Check if there's a maximum file size (our PDFs are ~217KB)
- **File Format Restrictions:** Ensure no specific PDF version restrictions

#### B. Document Settings
- **Document Type:** Should be set to "PDF" or "Any"
- **Template vs Upload:** Since it's a PDF workflow, it should allow file uploads

### 3. Check Signing Flow Settings
- Ensure the workflow allows document uploads
- Check if there are any restrictions on the signing process

### 4. Alternative: Create a Test Workflow
If the current workflow has restrictions:

1. Click **"Create"** button in the top right
2. Select **"PDF Workflow"** or **"Document Workflow"**
3. Configure it with:
   - **Name:** "Test PDF Workflow"
   - **File Type:** PDF (or All)
   - **No file size restrictions** (or set a high limit like 10MB)
4. Save the workflow
5. Download the new API Payload
6. Update your `.env`:
   ```env
   LEEGALITY_PROFILE_ID=new-profile-id-from-payload
   ```

## Common Issues and Solutions

### Issue: "file.content.type.not.allowed"
**Possible Causes:**
1. Workflow has file type restrictions enabled
2. PDF format generated by Puppeteer isn't recognized
3. Workflow expects a specific PDF version

**Solutions:**
1. Check workflow settings for file type restrictions
2. Try creating a new workflow without restrictions
3. Contact Leegality support if the issue persists

### Issue: PDF Validation Passes but Still Rejected
**Possible Causes:**
1. Workflow has specific PDF requirements
2. File encoding issues
3. Workflow configuration mismatch

**Solutions:**
1. Verify workflow allows "PDF" file type
2. Check if workflow requires a specific PDF standard
3. Try uploading a test PDF manually through the dashboard to verify workflow accepts PDFs

## Testing Steps

1. **Manual Test:**
   - Try uploading a PDF manually through Leegality Dashboard
   - If manual upload works, the issue is with our API request format
   - If manual upload fails, the workflow has restrictions

2. **API Test:**
   - Use the API Payload structure exactly as shown in the downloaded JSON
   - Ensure file format matches what Leegality expects

3. **Contact Support:**
   - If workflow settings look correct but still getting errors
   - Share the error code: `file.content.type.not.allowed`
   - Ask about PDF format requirements for API uploads

## Next Steps

1. Click on your "Huelip" workflow to view/edit settings
2. Check for any file type restrictions
3. Share what you find, or try creating a new test workflow
4. If settings look correct, we may need to adjust the PDF generation format


